##React

createPortal

```js
import { useState } from "react";
import { createPortal } from "react-dom";

import Toast from "./components/Toast";

const ToastPortal = ({ children }) => {
  const target = document.querySelector(".container.start"); //targetにclassNameのDOMを代入
  return createPortal(children, target); //ToastPortalを呼ぶとcreatePortal
};
const Example = () => {
  const [toastOpen, setToastOpen] = useState(false); // toastOpen,setToastOpenにuseStateの初期値falseを分割代入
  return (
    <div>
      {/* <h3>
        トーストの作成（createPortal）
      </h3>
      <p>ボタンを押すと.container.start要素にマウントされて、表示されるトーストを作成してください。トーストにはToastコンポーネントを使用してください。</p> */}

      <div className="container start"></div>
      <button
        type="button"
        onClick={() => setToastOpen(true)} //onClickでsetToastOpenにtrueを設定
        disabled={toastOpen}
      >
        トーストを表示する
      </button>

      {toastOpen && ( //　ここからがトースト要素
        <ToastPortal>
          <Toast
            visible={toastOpen}
            handleCloseClick={() => setToastOpen(false)} // handleCloseClickでsetToastOpenにfalseを設定
          />
        </ToastPortal>
      )}
    </div>
  );
};

export default Example;
```

useRef

```ts
import { useState, useRef } from "react";

const Case1 = () => {
  const [value, setValue] = useState(""); //value、setvalueにuseStateの初期値から文字列を分割代入
  const inputRef = useRef() // inputRefにuseRef()を代入　ここでは.currentプロパティが渡された引数をinputRefに返している
  return (
    <div>
      <h3>ユースケース1</h3>
      <input type="text" ref={inputRef} value={value} onChange={(e) => setValue(e.target.value)} />
      { <button onClick={() => inputRef.current.focus()}> } {/* onClickでinput.currentにfocusする */}
        インプット要素をフォーカスする
      </button>
    </div>
  );
};

const Case2 = () => {
  const [playing, setPlaying] = useState(false); // playing, setPlayingにuseState(false)を分割代入
  const videoRef = useRef(); // videoRefにuseRef()を代入
  return (
    <div>
      <video style={{ maxWidth: '100%'}} ref={videoRef} >
        <source src='./sample.mp4'></source>
      </video>
      <button onClick={() => {
        if(playing) {
          videoRef.current.pause();
        } else {
          videoRef.current.play();
        }
        setPlaying(prev => !prev);
      }}>
        {playing ? 'Stop' : 'Play'}
      </button>
    </div>
  )
}

const Example = () => {
  return (
    <>
      <Case1 />
      <Case2 />
    </>
  );
};

export default Example;


```

useState

```ts
import { useState } from "react";

// POINT stateとレンダリングの仕組み
const Example = () => {
  let displayVal;
  let [val, setVal] = useState();
  // console.log('再レンダリングされました');
  return (
    <>
      <input
        type="text"
        onChange={(e) => {
          console.log(e.target.value);
          // setVal(e.target.value);
          // displayVal = e.target.value;
        }}
      />
      = {val}
    </>
  );
};

export default Example;
```

useContext(),createContext();

```ts

index.ts {
  // POINT useContextとstate
  import { createContext, useState } from "react";
  import Child from "./component/Child";
  import OtherChild from "./component/OtherChild";

  export const MyContext = createContext();

  const Example = () => {
    const stateAndSetter = useState(0);
    // stateAndSetter = [ state, setState ]
    return (
      <MyContext.Provider value={stateAndSetter}>
        <Child />
        <OtherChild />
      </MyContext.Provider>
    );
  };
}

export default Example;

OtherChild.ts {
  import { useContext } from "react";
  import { MyContext } from "../Example";
  const OtherChild = () => {
    const [, setState] = useContext(MyContext);

    const clickHandler = (e) => {
      setState((prev) => prev + 1);
    };

    return (
      <div style={{ border: "1px solid black" }}>
        <h3>他の子コンポーネント</h3>
        <button onClick={clickHandler}>+</button>
      </div>
    );
  };

  export default OtherChild;
}

Child.ts {
  import GrandChild from "./GrandChild";
  const Child = () => (
    <div style={{ border: "1px solid black", padding: 10 }}>
      <h3>子コンポーネント</h3>
      <GrandChild />
    </div>
  );
  export default Child;
}




```
